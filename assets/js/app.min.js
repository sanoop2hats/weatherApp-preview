let errorMsg=document.querySelector(".error-msg"),Currenttemp=document.querySelector(".Ctemp"),description=document.querySelector(".description"),weatherIcon=document.querySelector(".weather-set-icon"),humidity=document.querySelector(".humidity"),wind=document.querySelector(".wind"),city=document.querySelector(".current-location"),highTemp=document.querySelector(".high-temp"),lowTemp=document.querySelector(".low-temp"),dateEl=document.querySelector(".current-date"),days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],currentDate=new Date,month=currentDate.getMonth(),date=currentDate.getDate(),day=currentDate.getDay();dateEl.innerHTML=days[day]+", "+date+" "+months[month];const key="82005d27a116c2880c8f0fcb866998a0";function getLocation(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(showPosition):errorMsg.innerHTML="Geolocation is not supported by this browser."}function showPosition(position){getWeather(position.coords.latitude,position.coords.longitude)}function getWeather(latitude,longitude){latitude=`https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=`+key;fetch(latitude).then(function(response){return response.json()}).then(function(data){console.log(data),Currenttemp.value=Math.floor(data.main.temp-272),highTemp.value=Math.floor(data.main.temp_max-272),lowTemp.value=Math.floor(data.main.temp_min-272),description.value=data.weather[0].description,weatherIcon.value=data.weather[0].icon,humidity.value=data.main.humidity,wind.value=data.wind.speed,city.value=data.name,weatherReport(data)}).then(function(){displayWeather()})}function displayWeather(){Currenttemp.innerHTML=Currenttemp.value+"<sup>°c</sup>",description.innerHTML=description.value,city.innerHTML=city.value,highTemp.innerHTML=highTemp.value+"<sup>°c</sup>",lowTemp.innerHTML=lowTemp.value+"<sup>°c</sup>",humidity.innerHTML=humidity.value+"<span>%</span>",wind.innerHTML=wind.value+"<span>Km/h</span>",weatherIcon.innerHTML=`<img src="assets/img/${weatherIcon.value}.png"/> `}function weatherReport(data){data=`https://api.openweathermap.org/data/2.5/forecast?q=${data.name}&exclude=hourly,minutely&units=metric&appid=`+key;fetch(data).then(function(response){return response.json()}).then(function(forecast){dayForecast(forecast)})}function dayForecast(forecast){document.querySelector(".weekF").innerHTML="";for(let i=8;i<forecast.list.length;i+=8){console.log(forecast);var div=document.createElement("div"),day=(div.setAttribute("class","dayF forcast-box"),document.createElement("p")),day=(day.setAttribute("class","date"),day.innerText=new Date(1e3*forecast.list[i].dt).toDateString(undefined,"Asia/Kolkata"),div.appendChild(day),document.createElement("p")),day=(day.setAttribute("class","tempset"),day.innerText=Math.floor(forecast.list[i].main.temp_max)+" °C / "+Math.floor(forecast.list[i].main.temp_min)+" °C",div.appendChild(day),document.createElement("p"));day.setAttribute("class","desc"),day.innerText=forecast.list[i].weather[0].description,div.appendChild(day),document.querySelector(".weekF").appendChild(div)}}getLocation();